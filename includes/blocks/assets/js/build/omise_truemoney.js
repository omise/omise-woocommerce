(()=>{"use strict";const e=window.React,t=window.wp.element,n=window.wp.i18n,o=window.wp.htmlEntities,s=window.wc.wcBlocksRegistry,a=(0,window.wc.wcSettings.getSetting)("omise_truemoney_data",{}),m=(0,o.decodeEntities)(a.title)||"No title set",r=({content:s,...m})=>{const{eventRegistration:r,emitResponse:i}=m,{onPaymentSetup:l}=r,p=(0,o.decodeEntities)(a.description.trim()||""),{is_wallet:c}=a.data,[u,d]=(0,t.useState)(!1),[_,w]=(0,t.useState)(!0),[E,h]=(0,t.useState)("");return(0,t.useEffect)((()=>{const e=l((async()=>{if(!_&&0===E.length)return{type:i.responseTypes.ERROR,message:"Enter a phone number"};try{return{type:i.responseTypes.SUCCESS,meta:{paymentMethodData:{omise_phone_number_default:(_?1:0).toString(),omise_phone_number:E}}}}catch(e){return{type:i.responseTypes.ERROR,message:e.message}}}));return()=>e()}),[l,i.responseTypes.ERROR,i.responseTypes.SUCCESS,_,E]),(0,e.createElement)(e.Fragment,null,p&&(0,e.createElement)("p",null,p),c&&(0,e.createElement)("fieldset",{id:"omise-form-truemoney"},(0,n.__)("TrueMoney phone number","omise"),(0,e.createElement)("br",null),(0,e.createElement)("p",{id:"omise_phone_number_default_field",className:"form-row form-row-wide omise-label-inline"},(0,e.createElement)("input",{id:"omise_phone_number_default",type:"checkbox",name:"omise_phone_number_default",value:_,defaultChecked:!0,onChange:e=>{w(!_),d(!u),_&&h("")}}),(0,e.createElement)("label",{htmlFor:"omise_phone_number_default"},(0,n.__)("Same as Billing Detail","omise"))),(0,e.createElement)("p",{id:"omise_phone_number_field",className:"form-row form-row-wide",style:{display:u?"block":"none"}},(0,e.createElement)("span",{className:"woocommerce-input-wrapper"},(0,e.createElement)("input",{id:"omise_phone_number",className:"input-text",name:"omise_phone_number",type:"tel",autoComplete:"off",onChange:e=>{h(e.target.value)}}))),(0,e.createElement)("p",{className:"omise-secondary-text"},(0,n.__)("One-Time Password (OTP) will be sent to the phone number above","omise"))))};(0,s.registerPaymentMethod)({name:a.name||"",label:(0,e.createElement)((t=>{const{PaymentMethodLabel:n}=t.components;return(0,e.createElement)(n,{text:m})}),null),content:(0,e.createElement)(r,null),edit:(0,e.createElement)(r,null),canMakePayment:()=>a.is_active,ariaLabel:m,supports:{features:a.supports}})})();