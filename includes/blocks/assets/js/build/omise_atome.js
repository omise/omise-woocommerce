(()=>{"use strict";const e=window.React,t=window.wp.element,n=window.wp.i18n,a=window.wp.htmlEntities,o=window.wc.wcBlocksRegistry,s=(0,window.wc.wcSettings.getSetting)("omise_atome_data",{}),m=(0,a.decodeEntities)(s.title)||"No title set",r=o=>{const{eventRegistration:m,emitResponse:r}=o,{onPaymentSetup:l}=m,i=(0,a.decodeEntities)(s.description||""),{status:p,message:c}=s.data,[u,d]=(0,t.useState)(!1),[_,w]=(0,t.useState)(!0),[E,h]=(0,t.useState)("");return(0,t.useEffect)((()=>{const e=l((async()=>{if(!_&&0===E.length)return{type:r.responseTypes.ERROR,message:"Enter a phone number"};try{return{type:r.responseTypes.SUCCESS,meta:{paymentMethodData:{omise_atome_phone_default:(_?1:0).toString(),omise_atome_phone_number:E}}}}catch(e){return{type:r.responseTypes.ERROR,message:e.message}}}));return()=>e()}),[l,r.responseTypes.ERROR,r.responseTypes.SUCCESS,_,E]),(0,e.createElement)(e.Fragment,null,i&&(0,e.createElement)("p",null,i),p?(0,e.createElement)("fieldset",{id:"omise-form-atome"},(0,n.__)("Atome phone number","omise"),(0,e.createElement)("br",null),(0,e.createElement)("p",{className:"form-row form-row-wide omise-label-inline"},(0,e.createElement)("input",{id:"omise_atome_phone_default",type:"checkbox",name:"omise_atome_phone_default",value:_,defaultChecked:!0,onChange:e=>{w(!_),d(!u),_&&h("")}}),(0,e.createElement)("label",{htmlFor:"omise_atome_phone_default"},(0,n.__)("Same as Billing Detail","omise"))),(0,e.createElement)("p",{id:"omise_atome_phone_field",className:"form-row form-row-wide",style:{display:u?"block":"none"}},(0,e.createElement)("span",{className:"woocommerce-input-wrapper"},(0,e.createElement)("input",{id:"omise_atome_phone_number",className:"input-text",name:"omise_atome_phone_number",type:"tel",autoComplete:"off",placeholder:"+66123456789",onChange:e=>{h(e.target.value)}}))),(0,e.createElement)("p",{className:"omise-secondary-text"},(0,n.__)("The phone number will be used for creating Atome charge","omise"))):(0,e.createElement)("p",null,c))};(0,o.registerPaymentMethod)({name:s.name||"",label:(0,e.createElement)((t=>{const{PaymentMethodLabel:n}=t.components;return(0,e.createElement)(n,{text:m})}),null),content:(0,e.createElement)(r,null),edit:(0,e.createElement)(r,null),canMakePayment:()=>!0,ariaLabel:m,supports:{features:s.supports}})})();